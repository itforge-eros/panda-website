{"version":3,"sources":["single-page.js"],"names":["monthsTH","weekdaysTH","monthsEN","weekdaysEN","apiURL","findMin_Max","min_time","Math","min","apply","app","chosenTimes","max_time","max","setSelected","j","document","getElementById","id","removeAttribute","setAttribute","setRawDate","date","m","getMonth","d","getDate","getFullYear","Vue","el","data","r_date","Date","r_date_raw","chosenSlots","submitText","spaceId","reportTitle","reportBody","reportToken","reportSent","submitHasError","methods","sendReport","axios","method","query","headers","then","console","log","result","catch","err","today","picker","Pikaday","field","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","firstDay","minDate","maxDate","yearRange","onClose","value","toString","day","split","month","weekday","monthsMapper","element","weekdaysMapper","findIndex","$","clockTimePicker","precision","required","minimum","maximum","onAdjust","newVal","oldVal","time","hr","mn","allowedLeastEndTime","val"],"mappings":"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","file":"single-page.js","sourcesContent":["const monthsTH = ['ม.ค.','ก.พ.','มี.ค','เม.ย.','พ.ค.','มิ.ย','ก.ค.','ส.ค.','ก.ย.','ต.ค.','พ.ย.','ธ.ค.'];\nconst weekdaysTH = ['อา.','จ.','อ.','พ.','พฤ.','ศ.','ส.'];\nconst monthsEN = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\nconst weekdaysEN = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];\n\nconst apiURL = \"https://api.space.itforge.io/graphql\";\n\nfunction findMin_Max() {\n\tmin_time = Math.min.apply(null, app.chosenTimes);\n\tmax_time = Math.max.apply(null, app.chosenTimes);\n}\nfunction setSelected () {\n\tfor (let j = min_time; j <= (max_time); j+=0.5) {\t\n\t\tdocument.getElementById(id=\"slot-\" + j).removeAttribute(\"class\");\n\t\tdocument.getElementById(id=\"slot-\" + j).setAttribute(\"class\", \"slot selected\");\n\t}\n}\nfunction setRawDate(date) {\n\t// create a raw date for sending to the API (eg. 2018-04-14)\n\tlet m = date.getMonth() + 1;\n\tlet d = date.getDate();\n\treturn (\n\t\tdate.getFullYear() + \"-\" + (m < 10 ? \"0\" + m : m) + \"-\" + (d < 10 ? \"0\" + d : d)\n\t);\n}\n\n/*Vue.component('time-slot', {\n\tprops: {\n\t\tavailable: Boolean,\n\t\tposition: Number,\n\t\tslotnum: Number\n\t},\n\ttemplate: '<span class=\"slot\" :class=\"{unavailable: !available, selected: isChosen}\" @click=\"choose\"><slot></slot></span>',\n\tdata: function () {\n\t\treturn {isChosen: false, isAvailable: this.available}\n\t},\n\tmethods: {\n\t\tchoose: () => {\n\t\t\tlet beSelected = document.getElementsByClassName(\"slot selected\");\n\t\t\tif (app.chosenTimes.length > 1) app.chosenTimes.length = 0;\n\t\t\tif (app.chosenSlots.length > 1) app.chosenSlots.length = 0;\n\t\t\twhile(beSelected.length >= 1) {\n\t\t\t\tfor (let i = 0; i < (beSelected.length); i+=1)\n\t\t\t\t\tbeSelected[i].setAttribute(\"class\", \"slot\");\n\t\t\t}\n\t\t\tif (this.isAvailable) {\n\t\t\t\tif (app.chosenTimes.includes(this.position)) {\n\t\t\t\t\tapp.chosenTimes.splice(app.chosenTimes.indexOf(this.position), 1);\n\t\t\t\t} else app.chosenTimes.push(this.position);\n\t\t\t\tif (app.chosenSlots.includes(this.slotnum)) {\n\t\t\t\t\tapp.chosenSlots.splice(app.chosenSlots.indexOf(this.slotnum), 1);\n\t\t\t\t} else app.chosenSlots.push(this.slotnum);\n\t\t\t} else {\n\t\t\t\tapp.chosenTimes.length = 0;\n\t\t\t\tapp.chosenSlots.length = 0;\n\t\t\t\tapp.startSlot = 0;\n\t\t\t\tapp.endSlot = 0;\n\t\t\t}\n\t\t\t// sub function psudoDrag\n\t\t\tfindMin_Max();\n\t\t\tsetSelected();\n\t\t}\n\t}\n});*/\n\nvar app = new Vue({\n\tel: '#app',\n\tdata: {\n\t\tr_date: new Date(),\n\t\tr_date_raw: \"\",\n\t\tchosenTimes: [],\n\t\tchosenSlots: [],\n\t\tsubmitText: \"ส่งรายงาน\",\n\t\tspaceId: \"\",\n\t\treportTitle: \"\",\n\t\treportBody: \"\",\n\t\treportToken: \"\",\n\t\treportSent: false,\n\t\tsubmitHasError: false\n\t},\n\tmethods: {\n\t\tsendReport: () => {\n\t\t\tthis.submitText = \"กำลังส่ง...\";\n\t\t\taxios(apiURL, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: {\n\t\t\t\t\tquery: `\n\t\t\t\t\t\tmutation {\n\t\t\t\t\t\t\tcreateProblem(input: {spaceId: \"${app.spaceId}\", title: \"${app.reportTitle}\", body: \"${app.reportBody}\"}) {\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t`\n\t\t\t\t},\n\t\t\t\theaders: {\"Authorization\": \"bearer\" + app.reportToken}\n\t\t\t})\n\t\t\t\t.then(result => {\n\t\t\t\t\tconsole.log(result);\n\t\t\t\t\tapp.submitText = \"ส่งรายงาน\";\n\t\t\t\t\tapp.reportSent = true;\n\t\t\t\t\tapp.reportTitle = \"\";\n\t\t\t\t\tapp.reportBody = \"\";\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tapp.reportSent = false;\n\t\t\t\t\tapp.submitText = \"ส่งรายงาน\";\n\t\t\t\t\tapp.submitHasError = true;\n\t\t\t\t});\n\t\t}\n\t}\n});\n\n// Date picker\nconst today = new Date();\nvar picker = new Pikaday({\n\tfield: document.getElementById(\"datepicker\"),\n\ti18n: {\n\t\tpreviousMonth : 'เดือนที่แล้ว',\n    \tnextMonth     : 'เดือนหน้า',\n\t\tmonths : monthsTH,\n\t\tweekdays      : weekdaysEN,\n\t    weekdaysShort : weekdaysTH\n\t},\n\tfirstDay: 1,\n\tminDate: today,\n\tmaxDate: new Date(\n\t\ttoday.getFullYear() + 1,\n\t\ttoday.getMonth(),\n\t\ttoday.getDate()\n\t),\n\tyearRange: [today.getFullYear(), today.getFullYear() + 1],\n\tonClose: () => {\n\t\tapp.r_date = document.getElementById(\"datepicker\").value;\n\t\tapp.r_date_raw = setRawDate(picker.getDate());\n\t},\n\ttoString(date) {\n\t\tconst day = date.toString().split(\" \")[2];\n\t\tconst month = date.toString().split(\" \")[1];\n\t\tconst weekday = date.toString().split(\" \")[0];\n\t\tconst monthsMapper = element => element == `${month}`;\n\t\tconst weekdaysMapper = element => element == `${weekday}`;\n\t\tapp.r_date = `${weekdaysTH[weekdaysEN.findIndex(weekdaysMapper)]}\\u0020${day}\\u0020${monthsTH[monthsEN.findIndex(monthsMapper)]}`;\n\t\treturn `${weekdaysTH[weekdaysEN.findIndex(weekdaysMapper)]}\\u0020${day}\\u0020${monthsTH[monthsEN.findIndex(monthsMapper)]}`;\n\t}\n});\napp.r_date_raw = setRawDate(picker.getDate()); // initial to present\n\n// Time picker\n$(\"#timeStart\").clockTimePicker({\n\tprecision: 30,\n\trequired: true,\n\tminimum: \"09:00\",\n\tmaximum: \"19:30\",\n\tonAdjust: (newVal, oldVal) => {\n\t\tlet time = newVal.split(\":\");\n\t\tlet hr = time[1] == \"00\" ? time[0] : ++time[0];\n\t\tlet mn = time[1] == \"00\" ? \"30\" : \"00\";\n\t\tlet allowedLeastEndTime = hr + \":\" + mn;\n\t\t$(\"#timeEnd\").val(allowedLeastEndTime)\n\t}\n});\n$(\"#timeEnd\").clockTimePicker({\n\tprecision: 30,\n\trequired: true,\n\tminimum: \"09:00\",\n\tmaximum: \"19:30\"\n});\n"]}