{"version":3,"names":[],"mappings":"","sources":["manage-space-single.js"],"sourcesContent":["const apiURL = \"https://api.space.itforge.io/graphql\";\n\nvar app = new Vue({\n\tel: \"#app\",\n\tdata: {\n\t\tspaceName: \"\",\n\t\tspaceURI: \"\",\n\t\tspaceId: \"\",\n\t\tuploadBoxIsOpen: false,\n\t\tmemberToken: \"\",\n\t\tuploadBoxIsLoading: false\n\t},\n\tcomputed: {\n\t\tcomputedSpaceURI: function() {\n\t\t\treturn this.spaceURI.toLowerCase().replace(/ /g, \"-\")\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggleUploadBox: function() {\n\t\t\tif (!this.uploadBoxIsOpen) {\n\t\t\t\tthis.uploadBoxIsLoading = true;\n\t\t\t\t// if isOpen => call for upload URL and create dropzone\n\t\t\t\taxios(apiURL, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tquery: `mutation {uploadSpaceImage(input: {spaceId: \"${app.spaceId}\"})}`\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\"Authorization\": \"bearer\" + app.memberToken}\n\t\t\t\t})\n\t\t\t\t.then(function(data) {\n\t\t\t\t\tconsole.log(data.data.data.uploadSpaceImage);\n\t\t\t\t\tcreateDropzone(data.data.data.uploadSpaceImage);\n\t\t\t\t\tapp.uploadBoxIsLoading = false;\n\t\t\t\t\tapp.uploadBoxIsOpen = true;\n\t\t\t\t})\n\t\t\t\t.catch(function(err) { console.log(err) });\n\t\t\t}\n\t\t\t// is isClosed => clear queue and remove dropzone\n\t\t}\n\t}\n});\n\nfunction createDropzone(url) {\n\tvar imgDropzone = new Dropzone(\"div#imgDropzone\", {\n\t\turl: url,\n\t\tmaxFiles: 1,\n\t\tmethod: \"put\",\n\t\tacceptedFiles: \"image/*\",\n\t\theaders: [{\"Content-Type\": \"image/jpeg\"}],\n\t\tresizeWidth: 1000,\n\t\tresizeHeight: 500,\n\t\tresizeMethod: \"crop\",\n\t\tresizeMimeType: \"image/jpeg\",\n\t\tdictDefaultMessage: \"ลากภาพมาวางที่นี่ (อัพโหลดได้ 1 ภาพ)\",\n\t\tdictMaxFilesExceeded:\"เกินจำนวนไฟล์ที่อนุญาต\",\n\t\tdictInvalidFileType: \"ไม่ใช่รูปภาพ\",\n\t\tsending: function(file, xhr) {\n\t\t\tvar _send = xhr.send;\n\t\t\txhr.send = function() {_send.call(xhr, file);};\n\t\t}\n\t});\n}\n"],"file":"manage-space-single.js"}